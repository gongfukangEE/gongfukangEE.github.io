---
layout: post
title:  "Mybatis学习笔记[1] -- 原生JDBC问题总结"
categories: WEB开发
tags:  Mybatis
author: G.Fukang
---
* content
{:toc}
MyBatis学习之原生JDBC总结分析



## 原生JDBC连接数据库

- 加载数据库驱动
- 通过驱动管理类`Connection`获得数据库连接
- 创建并获取预处理Statement对象
- 编写SQL语句并设置参数
- 通过`PreparedStatement`执行SQL并获取`ResultSet`结果集
- 对结果进行解析处理
- 释放资源`resultSet` --> `preparedStatement` --> `connection`

## Demo程序

```java
public class JDBCTest {
    public static void main(String[] args) {

        Connection connection=null;
        ResultSet resultSet=null;
        PreparedStatement preparedStatement=null;

        try {
            String url = "jdbc:mysql://localhost:3306/mybatis";
            String user = "root";
            String password = "123456";
            String driver = "com.mysql.jdbc.Driver";

            Class.forName(driver);
            connection = DriverManager.getConnection(url, user, password);

            String sql="select * from user where id = ?";
            preparedStatement=connection.prepareStatement(sql);
            preparedStatement.setString(1,"10");

            resultSet =preparedStatement.executeQuery();

            while (resultSet.next()){
                System.out.println(resultSet.getString("id")+" : "+resultSet.getString("username"));
            }
        }catch (ClassNotFoundException e){
            e.printStackTrace();
        }catch (SQLException e){
            e.printStackTrace();
        }finally {
            try {
                if(resultSet!=null)
                    resultSet.close();
            }catch (SQLException e){
                e.printStackTrace();
            }

            try{
                if(preparedStatement!=null)
                    preparedStatement.close();
            }catch (SQLException e){
                e.printStackTrace();
            }

            try {
                if(connection!=null)
                    connection.close();
            }catch (SQLException e){
                e.printStackTrace();
            }
        }
    }
}
```

## 原生JDBC存在的问题

- 数据库连接的时候，需要就创建，使用完就释放，对数据库进行频繁连接和释放，造成数据库资源的浪费，影响数据库的性能
- SQL语句硬编码在Java代码中，不利于修改和维护
- 向preparedStatement设置参数，对占位符号位置和设置参数值，硬编码在Java代码中，不利于维护
- 解析结果集硬编码在Java代码中，不利于维护