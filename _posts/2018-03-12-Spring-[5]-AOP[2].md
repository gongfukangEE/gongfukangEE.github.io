---
layout: post
title:  "Spring学习笔记[5] -- AOP入门程序"
categories: WEB开发
tags:  Spring
author: G.Fukang
---
* content
{:toc}
Spring学习笔记之AOP入门程序：基于XML配置文件和基于注解



## 基于XML配置文件

### 接口和接口实现类

```java
public interface CustomerDao {
    public void save();
    public void update();
}

public class CustomerDaoImpl implements CustomerDao {
    @Override
    public void save() {
        System.out.println("Demo03：保存用户信息...");
    }
    @Override
    public void update() {
        System.out.println("Demo03：更新用户信息...");
    }
}
```

### 编写切面类

```java
//切面类=切入点+通知
public class MyAspectXml {

    public void log(){
        System.out.println("Demo03:记录日志...");
    }

    public void after(){
        System.out.println("最终通知...");
    }

    public void afterReturning(){
        System.out.println("后置通知...");
    }

    public void around(ProceedingJoinPoint joinPoint){
        System.out.println("环绕通知1...");

        try {
            joinPoint.proceed();
        } catch (Throwable throwable) {
            throwable.printStackTrace();
        }
        System.out.println("环绕通知2...");
    }
}
```

### 配置XML文件

- 配置用户Dao

  ```xml
  <bean id="customerDao" class="gongfukangee.Demo03.CustomerDaoImpl"/>
  ```

- 配置切面类

  ```xml
  <bean id="myAspectXml" class="gongfukangee.Demo03.MyAspectXml"/>
  ```

- 配置AOP

  ```xml
      <aop:config>
          <!-- ref：引入切面类 -->
          <aop:aspect ref="myAspectXml">
              <!-- 配置的前置通知 -->
              <aop:before method="log" pointcut="execution(public void gongfukangee.Demo03.CustomerDaoImpl.save())"/>
              <!-- 最终通知 -->
              <aop:after method="after" pointcut="execution(* *..*.*DaoImpl.*save(..))"/>
              <!-- 后置通知 -->
              <aop:after-returning method="afterReturning" pointcut="execution(* *..*.*DaoImpl.*save(..))"/>
              <!-- 环绕通知 -->
              <aop:around method="around" pointcut="execution(* *..*.*DaoImpl.*save(..))"/>
          </aop:aspect>
      </aop:config>
  ```

  ​

